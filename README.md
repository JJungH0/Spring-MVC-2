# ðŸŒ¿ Spring-MVC

> ì¶œì²˜: ë³¸ ë¬¸ì„œëŠ” ê¹€ì˜í•œ ê°•ì‚¬ë‹˜ì˜ Spring-MVC ê°•ì˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©°,  ê°œì¸ì ì¸ ì´í•´ ë° í•´ì„ì„ ë”í•´ ì •ë¦¬í•œ ìžë£Œìž…ë‹ˆë‹¤

### í”„ë¡œì íŠ¸ ê°œìš”
    - í”„ë¡œì íŠ¸ ì„ íƒ
        - Project: Gradle Groovy
        - Language: Java
        - Framework: Spring Boot 3.5.7
    - Project Metadata
        - Group: hello
        - Artifact: springmvc
        - Packaging: Jar
        - Java: 21
    - Dependencies
        - Spring Web
        - Spring Boot Starter Thymeleaf
        - Lombok
### Jar & War
    - jar: 
        - í•­ìƒ ë‚´ìž¥ ì„œë²„ (= í†°ìº£)ë¥¼ ì‚¬ìš©í•˜ê³ , webapp ê²½ë¡œ ì‚¬ìš© X, ë‚´ìž¥ ì„œë²„ ì‚¬ìš©ì— ìµœì í™”
    - war:
        - JSP í™˜ê²½ì—ì„œ ìžì£¼ ì‚¬ìš©, ì£¼ ëª©ì ì€ ì™¸ë¶€ ì„œë²„ì— ë°°í¬í•˜ëŠ” ëª©ì 

> **ë¡œê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬:**
> - Logback, Log4J, Log4J2 ë“±ë“± ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¡´ìž¬
> - í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ì„œ ì¸í„°íŽ˜ì´ìŠ¤ë¡œ ì œê³µí•˜ëŠ” ê²ƒì´ **SLF4J** (= Simple Logging Facade for Java)
> - ê²°ë¡  SLF4JëŠ” ì¸í„°íŽ˜ì´ìŠ¤ì´ê³ , í•´ë‹¹ ì¸í„°íŽ˜ì´ìŠ¤ êµ¬í˜„ì²´ë¡œ Logback ê°™ì€ ë¡œê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„ íƒ

> **ë¡œê·¸ ì„ ì–¸**
> - private Logger log = LoggerFactory.getLogger(getClass());
> - @Slf4j: ë¡¬ë³µ ì‚¬ìš©ê°€ëŠ¥

> **ë¡œê·¸ í˜¸ì¶œ** 
> - log.info("test");

> **ë¡œê·¸ ë ˆë²¨ ì„¤ì •**
> - application.properties :
>   - ì „ì²´ ë¡œê·¸ ë ˆë²¨ ì„¤ì • (= ê¸°ë³¸ INFO)
>     - logging.level.root=INFO
>   - hello.springmvc íŒ¨í‚¤ì§€ì™€ ê·¸ í•˜ìœ„ ë¡œê·¸ ë ˆë²¨ ì„¤ì •
>     - logging.level.hello.springmvc=DEBUG

> **ì˜¬ë°”ë¥¸ ë¡œê·¸ ì‚¬ìš©ë²•** 
> - log.debug("data=" + data);
>   - ë¡œê·¸ ì¶œë ¥ ë ˆë²¨ì„ INFOë¡œ ì„¤ì •í•´ë„ í•´ë‹¹ ì½”ë“œì— ìžˆëŠ” "data" + dataê°€ ì‹¤ì œ ì‹¤í–‰ë˜ì–´ ë²„ë¦°ë‹¤
>   - ê²°ê³¼ì ìœ¼ë¡œ ë¬¸ìž ë”í•˜ê¸° ì—°ì‚°ì´ ë°œìƒ
> - log.debug("data={}", data);
>   - ë¡œê·¸ ì¶œë ¥ ë ˆë²¨ì„ INFOë¡œ ì„¤ì •í•˜ë©´ ì•„ë¬´ëŸ° í˜¸ì¶œë„ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤
>   - ë”°ë¼ì„œ ì•ž ì˜ˆì œì™€ ê°™ì€ ì˜ë¯¸ì—†ëŠ” ì—°ì‚°ì´ ë°œìƒ X

> **HTTP ë©”ì„œë“œ ë§¤í•‘**
> - @RequestMappingì— method ì†ì„±ìœ¼ë¡œ HTTP ë©”ì„œë“œë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ HTTP ë©”ì„œë“œì™€ ë¬´ê´€í•˜ê²Œ í˜¸ì¶œ

> **MultiValueMap** 
> - MAPê³¼ ìœ ì‚¬í•œë°, í•˜ë‚˜ì˜ í‚¤ì— ì—¬ëŸ¬ ê°’ì„ ë°›ì„ ìˆ˜ ìžˆë‹¤.
> - HTTP header, HTTP ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì™€ ê°™ì´ í•˜ë‚˜ì˜ í‚¤ì— ì—¬ëŸ¬ ê°’ì„ ë°›ì„ ë•Œ ì‚¬ìš©í•œë‹¤.
>   - keyA=value1&keyA=value2

> **í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ìš”ì²­ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ë•ŒëŠ” ì£¼ë¡œ 3ê°€ì§€ ë°©ë²•ì„ ì‚¬ìš©**
> - GET - ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°
>   - /url?username=hello&age=20
>   - ë©”ì‹œì§€ ë°”ë”” ì—†ì´, URLì˜ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì— ë°ì´í„°ë¥¼ í¬í•¨í•´ì„œ ì „ë‹¬
>   - ì˜ˆ) ê²€ìƒ‰, í•„í„°, íŽ˜ì´ì§•ë“±ì—ì„œ ë§Žì´ ì‚¬ìš©í•˜ëŠ” ë°©ì‹
> - POST - HTML Form
>   - content-type: application/x-www-form-urlencoded
>   - ë©”ì‹œì§€ ë°”ë””ì— ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° í˜•ì‹ìœ¼ë¡œ ì „ë‹¬ username=hello&age=20
>   - ì˜ˆ) íšŒì› ê°€ìž…, ìƒí’ˆ ì£¼ë¬¸, HTML Form ì‚¬ìš©
> - HTTP message bodyì— ë°ì´í„°ë¥¼ ì§ì ‘ ë‹´ì•„ì„œ ìš”ì²­
>   - HTTP APIì—ì„œ ì£¼ë¡œ ì‚¬ìš©, JSON, XML, TEXT
>   - ë°ì´í„° í˜•ì‹ì€ ì£¼ë¡œ JSON ì‚¬ìš©
>   - POST, PUT, PATCH


> **@RequestBody**
> - @RequestBodyë¥¼ ì‚¬ìš©í•˜ë©´ HTTP ë©”ì‹œì§€ ë°”ë”” ì •ë³´ë¥¼ íŽ¸ë¦¬í•˜ê²Œ ì¡°íšŒ ê°€ëŠ¥
> - í—¤ë” ì •ë³´ê°€ í•„ìš”í•˜ë‹¤ë©´ HttpEntityë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ @RequestHeaderë¥¼ ì‚¬ìš©
> - í•´ë‹¹ ë©”ì‹œì§€ ë°”ë””ë¥¼ ì§ì ‘ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ì€ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí•˜ëŠ” @RequestParam, @ModelAttributeì™€ ê´€ë ¨ X
 
> **ìš”ì²­ íŒŒë¼ë¯¸í„° vs HTTP ë©”ì‹œì§€ ë°”ë””**
> - ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥
>   - @RequestParam, @ModelAttribute
> - HTTP ë©”ì‹œì§€ ë°”ë””ë¥¼ ì§ì ‘ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥
>   - @RequestBody
> - @ResponseBody
>   - HTTP ë©”ì‹œì§€ ë°”ë””ì— ì§ì ‘ ë‹´ì•„ì„œ ì „ë‹¬ (= View ì‚¬ìš© X)

> **HTTP ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿**
> - ì •ì  ë¦¬ì†ŒìŠ¤
>   - ì›¹ ë¸Œë¼ìš°ì €ì— ì •ì ì¸ HTML, CSS, JSë¥¼ ì œê³µí•  ë–„ëŠ” **ì •ì  ë¦¬ì†ŒìŠ¤**ë¥¼ ì‚¬ìš©
> - ë·° í…œí”Œë¦¿ ì‚¬ìš©
>   - ì›¹ ë¸Œë¼ìš°ì €ì— ë™ì ì¸ HTMLì„ ì œê³µí•  ë–„ëŠ” ë·° í…œí”Œë¦¿ì„ ì‚¬ìš©í•œë‹¤
> - HTTP ë©”ì‹œì§€ ì‚¬ìš©
>   - HTTP APIë¥¼ ì œê³µí•˜ëŠ” ê²½ìš°ì—ëŠ” HTMLì´ ì•„ë‹ˆë¼ ë°ì´í„°ë¥¼ ì „ë‹¬í•´ì•¼ í•˜ë¯€ë¡œ, HTTP ë©”ì‹œì§€ ë°”ë””ì— JSONê°™ì€ í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì‹¤ì–´ ë³´ë‚¸ë‹¤

> **ì •ì  ë¦¬ì†ŒìŠ¤**
> - ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” í´ëž˜ìŠ¤íŒ¨ìŠ¤ì˜ ë‹¤ìŒ ë””ë ‰í† ë¦¬ì— ìžˆëŠ” ì •ì   ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µí•œë‹¤
>   - /static, /public, /resources, /META-INF/resources
>   - src/main/resourcesëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ë³´ê´€í•˜ëŠ” ê³³ì´ê³ , í´ëž˜ìŠ¤íŒ¨ìŠ¤ì˜ ì‹œìž‘ ê²½ë¡œìž„
>   - ë”°ë¼ì„œ ë‹¤ìŒ ë””ë ‰í† ë¦¬ì— ë¦¬ì†ŒìŠ¤ë¥¼ ë„£ì–´ë‘ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì •ì  ë¦¬ì†ŒìŠ¤ë¡œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µ
> - ì •ì  ë¦¬ì†ŒìŠ¤ ê²½ë¡œ
>   - src/main/resources/static
>   - ë‹¤ìŒ ê²½ë¡œì— íŒŒì¼ì´ ì¡´ìž¬í•˜ë©´ src/main/resources/static/basic/hello-form.html
>   - ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰í•˜ë©´ ëœë‹¤
>   - http://localhost:8080/basic/hello-form.html
>   - ì •ì  ë¦¬ì†ŒìŠ¤ëŠ” í•´ë‹¹ íŒŒì¼ì„ ë³€ê²½ ì—†ì´ ê·¸ëŒ€ë¡œ ì„œë¹„ìŠ¤í•˜ëŠ” ê²ƒ

> **ë·° í…œí”Œë¦¿** 
> - ë·° í…œí”Œë¦¿ì„ ê±°ì³ì„œ HTMLì´ ìƒì„±ë˜ê³ , ë·°ê°€ ì‘ë‹µì„ ë§Œë“¤ì–´ì„œ ì „ë‹¬í•œë‹¤
> - ì¼ë°˜ì ìœ¼ë¡œ HTMLì„ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•˜ì§€ë§Œ, ë‹¤ë¥¸ ê²ƒë“¤ë„ ê°€ëŠ¥, ë·° í…œí”Œë¦¿ì´ ë§Œë“¤ ìˆ˜ ìžˆëŠ” ê²ƒì´ë¼ë©´ ë­ë“  ê°€ëŠ¥
> - ë·° í…œí”Œë¦¿ ê²½ë¡œ
>   - src/main/resources/templates

> **HTTP ë©”ì‹œì§€**
> - @ResponseBody, HttpEntityë¥¼ ì‚¬ìš©í•˜ë©´ ë·° í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, HTTP ë©”ì‹œì§€ ë°”ë””ì— ì§ì ‘ ì‘ë‹µ ë°ì´í„°ë¥¼ ì¶œë ¥í•  ìˆ˜ ìžˆë‹¤.

> **Thymeleaf ìŠ¤í”„ë§ ë¶€íŠ¸ ì„¤ì •**
> - ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„± ì¶”ê°€
>   - org.springframework.boot:spring-boot-starter-thymeleaf
> - ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìžë™ìœ¼ë¡œ ThymeleafViewResolverì™€ í•„ìš”í•œ ë¹ˆë“¤ì„ ë“±ë¡
> - ê¸°ë³¸ ì„¤ì •
>   - application.properties
>     - thymeleaf.prefix=classpath:/templates/
>     - thymeleaf.suffix=.html

> **ArgumentResolver**
> - HandlerMethodArgumentResolverëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì˜ ê° íŒŒë¼ë¯¸í„° (= ë§¤ê°œë³€ìˆ˜)ë¥¼ ë¶„ì„í•´ì„œ ì ì ˆí•œ ê°’ì„ ìƒì„±í•˜ê±°ë‚˜ ì£¼ìž…í•´ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ” ì¸í„°íŽ˜ì´ìŠ¤
> - ë‚´ë¶€ íë¦„ :
>   - DispatcherServlet -> 
>   - HandlerAdapter -> 
>   - InvocableHandlerMethod -> 
>   - HandlerMethodArgumentResolverComposite -> 
>   - ê° ë§¤ê°œë³€ìˆ˜ë¥¼ ì§€ì›í•˜ëŠ” Resolver íƒìƒ‰ ë° ì‹¤í–‰
>   - ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œ í˜¸ì¶œ
> - ëª¨ë“  ArgumentResolver ëª©ë¡ì„ ìˆœì„œëŒ€ë¡œ ëŒë¦¬ë©´ì„œ supportsParameter()ë¡œ "í•´ë‹¹ íŒŒë¼ë¯¸í„° ì²˜ë¦¬ ì—¬ë¶€" í™•ì¸
> - resolveArgument()ë¥¼ í˜¸ì¶œí•´ì„œ ì‹¤ì œ ê°’ì„ ìƒì„± -> í•´ë‹¹ ê°’ì„ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì˜ ì¸ìžì— ë„£ì–´ì¤Œ

> **HandlerMethodReturnValueHandler**
> - ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë¦¬í„´ (=return)í•œ ê°’ì„ "ì–´ë–»ê²Œ ì‘ë‹µìœ¼ë¡œ ë³€í™˜í• ì§€ ì²˜ë¦¬"í•˜ëŠ” ì»´í¬ë„ŒíŠ¸
> - (= ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì˜ ë°˜í™˜ê°’(= return value)ì„ ë¶„ì„í•´ì„œ ê·¸ê²ƒì„ HTTPì‘ë‹µ, Model, View ë“±ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ì—­í• ì„ í•˜ëŠ” ì¸í„°íŽ˜ì´ìŠ¤)
> - ì‘ë‹µ íë¦„ :
>   - DispatcherServlet -> 
>   - HandlerMapping ->
>   - HandlerAdapter ->
>   - ArgumentResolver ->
>   - ì»¨íŠ¸ë¡¤ëŸ¬ ì‹¤í–‰ (= retrun Value ìƒì„±)
>   - ReturnValueHandler -> ë°˜í™˜ê°’ì„ ModelAndView ë˜ëŠ” HTTP ì‘ë‹µìœ¼ë¡œ ë³€í™˜
>   - ViewResolver -> ë·° ì°¾ì•„ì„œ ë Œë”ë§

> **HTTP ë©”ì‹œì§€ ì»¨ë²„í„° ìœ„ì¹˜ :**
> - ìš”ì²­ì˜ ê²½ìš° :
>   - '@RequestBody'ë¥¼ ì²˜ë¦¬í•˜ëŠ” 'ArgumentResolver'ê°€ ìžˆê³  'HttpEntity'ë¥¼ ì²˜ë¦¬í•˜ëŠ” 'ArgumentResolver'ê°€ ìžˆë‹¤.
>   - í•´ë‹¹ 'ArgumentResolver'ë“¤ì´ HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ì‚¬ìš©í•´ì„œ í•„ìš”í•œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒ
> - ì‘ë‹µì˜ ê²½ìš° :
>   - '@ResponseBody'ì™€ 'HttpEntity'ë¥¼ ì²˜ë§‡ëŠ” 'ReturnValueHandler'ê°€ ìžˆìŒ.
>   - ì—¬ê¸°ì„œì—ì„œ HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ í˜¸ì¶œí•´ì„œ ì‘ë‹µ ê²°ê³¼ë¥¼ ë§Œë“ ë‹¤
> - ìŠ¤í”„ë§ MVCëŠ” '@RequestBody' '@ResponseBody'ê°€ ìžˆë‹¤ë©´ 'RequestResponseBodyMethodProcessor' (= ArgumentResolver)
> - 'HttpEntity'ê°€ ìžˆìœ¼ë©´ 'HttpEntityMethodProcessor (= ArgumentResolver)'ë¥¼ ì‚¬ 
